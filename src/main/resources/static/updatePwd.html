<!DOCTYPE html>
<html>
	<head>
    <meta charset="UTF-8">
	<meta name="description" content="小说阅读,精彩小说尽在起点中文网. 起点中文网提供玄幻小说,武侠小说,原创小说,网游小说,都市小说,言情小说,青春小说,历史小说,军事小说,网游小说,科幻小说,恐怖小说,首发小说,最新章节免费">
	<meta name="keywords" content="小说,小说网,玄幻小说,武侠小说,都市小说,历史小说,网络小说,言情小说,青春小说,原创网络文学">
	<meta name="robots" content="all">
	<meta name="googlebot" content="all">
	<meta name="baiduspider" content="all">
	<meta http-equiv="mobile-agent" content="format=wml; url=http://m.qidian.com">
	<meta http-equiv="mobile-agent" content="format=xhtml; url=http://m.qidian.com">
	<meta http-equiv="mobile-agent" content="format=html5; url=http://h5.qidian.com/bookstore.html">
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta name="renderer" content="webkit">
	<title>修改密码 | 阅读网_阅文集团旗下网站</title>
	<link rel="stylesheet" type="text/css" href="https://sta.gtimg.com/c/=/qd6/css/cssreset.css,/qd6/css/header.css,/qd6/css/login.css,/qd6/css/layout.css,/qd6/css/sprites.css,/qd6/css/ui.css,/qd6/css/footer.css,/qd6/css/font.css,/qd6/css/reg.css,/qd6/css/pact.css">
	<link rel="shortcut icon" type="image/x-icon" href="https://sta.gtimg.com/qd6/images/qd_icon.ico">
	<link rel="Bookmark" type="image/x-icon" href="https://sta.gtimg.com/qd6/images/qd_icon.ico">
	</head>
	<style type="text/css">
		.ui-select{
			width: 0px;
	</style>
	<body>
	
	
<div class="wrap" >
	
    <!-- start 头部 -->
    <div class="header reg-header qidian">
        <div class="header reg-header qidian">
        <div class="box-center">
            <div class="logo cf">
            	<img src="images/1(1).png" />
            	
            </div>
        </div>
    </div>
    </div>
    <!-- end 头部 -->
    <!-- start 整体居中 -->
    <div class="box-center">
        <!-- start 注册模块 -->
        <div class="reg-wrap">
            <!-- start 注册进度 -->
            <div class="reg-step">
                <!-- 步进到哪一步，就给当前span上class：act -->
                <span class="lang act"><i>1</i>填写用户信息</span>
            </div>
            <div class="reg-form-wrap">
                <form action="">
                    <div class="reg-form-list form-list">
                        <dl>
                        	<dd id="Username" style="display: none;"><em>错误代码</em>
                                <select id="Usernamearea" style="display: none;"></select>
                                <input class="mid" type="text" placeholder="错误代码" id="txtphonenumber" style="margin-left: 0px;width: 307px;">
                            </dd>
                            <dd class="top" id="email"><em>QQ邮箱</em>
                                <select id="emailarea" style="display: none;">
                                </select>
                                <input id="txt_email" class="mid" type="text" placeholder="输入邮箱号码" id="txt_mail" style="margin-left: 0px;width: 307px;" >
                            
                            </dd>
                             <dd id="imgphonernd_code" class="hidden">
                                <em>验证码</em><input class="mid" type="text" id="txtphoneimgcode" placeholder="验证码">
                                <img class="code-img" id="imgphonernd" src="" alt="这里是验证码"><a href="javascript:" id="refresh_code" class="stat" data-stat="qd_L08|手机-验证码换一张|3">换一张</a>
                            </dd>
                            
                            <dd id="slide-verify" class="hidden">
                                <em>验证码</em>
                                <div class="slide-verify">
                                    <div id="cap_iframe" style="width:230px;height:40px"></div>
                                </div>
                            </dd>
                            
                            <dd id="phonecode"><em>邮箱验证</em>
                           		<input type="text" class="mid" placeholder="输入验证码" id="txtphonecode">
                                <a class="get-code stat" href="javascript:" id="get_code" data-stat="qd_L09|获取验证码|3">获取验证码</a>
                           		<label id="warn" style=" color:red; margin-right: 37px; "></label>
                           </dd>
                            <dd id="phonepwd"><em>密码</em>
                            	<input type="password" id="txt_pwd" placeholder="6-18位大小写字母、符号或数字">
                            <div class="password-tip" style="display:none">
                                <span><cite></cite></span>
                                <p id="pwdrule1">长度为6-18个字符</p>
                                <p id="pwdrule2">不能是9位以下的纯数字</p>                                                   
                                <p id="pwdrule3">不能包含空格</p>
                            </div>
                        </dl>
                        <div class="deal">
                            <input type="checkbox" id="deal" name="checkbox" >
                            <label for="deal" class="ui-checkbox"></label><label for="deal">我已阅读并同意 </label><a href="https://passport.yuewen.com/pact.html?mobile=0" target="_blank">《用户服务协议》</a> <label>和</label> <a target="_blank" href="https://passport.yuewen.com/privacy_policy.html">《隐私政策》</a>
                        </div>
                        <input id="btnRegister"  type="button" class="red-btn go-reg btn-qidian"  name="submit" value="修改密码" />

                    </div>
                </form>
            </div>
            <!-- end 注册进度 -->
        </div>
        <!-- end 注册模块 -->
    </div>
    <!-- end 整体居中 -->
    
    
    <script src="https://sta.gtimg.com/qd6/js/jquery-1.9.1.min.js"></script>
    <script src="https://sta.gtimg.com/qd6/js/lulu/Checkbox.js"></script>
    <script src="https://sta.gtimg.com/js3/jquery.cookie.js"></script>
    <script src="https://sta.gtimg.com/js3/yuewenauth.js"></script>
    <script src="https://sta.gtimg.com/js3/phoneAreaSortNew.js"></script>
    <script src="https://sta.gtimg.com/js3/register.js"></script>
    <script src="https://sta.gtimg.com/qd6/js/lulu/Select.js"></script>
    <script src="https://sta.gtimg.com/rsa/rsa_encrypt.js"></script>

    <div class="footer">
    <div class="link">
       
        <a href="ClientServerCenter.html"  target="_blank">联系我们</a>
        <a href="ClientServerCenter.html"  target="_blank">加入我们</a>
        <a href="ClientServerCenter.html" target="_blank">客服中心</a>
        <a href="ClientServerCenter.html" target="_blank">提交建议</a>
    </div>
      <div class="safety-box">
        <div class="safety-img dib-wrap">
            <a class="site1" href="http://www.pdxa.cn/Welcome.Asp?Id=3101151112" target="_blank"></a><a class="site2" href="http://www.sgs.gov.cn/lz/licenseLink.do?method=licenceView&amp;entyId=20111011181417625" target="_blank"></a><a class="site3" href="http://www.cyberpolice.cn/wfjb" target="_blank"></a><a class="site4" href="https://ss.knet.cn/verifyseal.dll?sn=e12120411010037414000000&amp;pa=090993" target="_blank"></a><a class="site5" href="http://www.shjbzx.cn" target="_blank"></a><a class="site6" href="http://www.12377.cn/node_548446.htm" target="_blank"></a><a class="site7" href="http://www.12377.cn/" target="_blank"></a>
        </div>
    </div>
</div>


</div>


		<script src="js/qs.js"></script>
        <script src="js/vue.js"></script>
        <script src="js/axios.js"></script>
	<script src="https://qidian.gtimg.com/lbf/2.0.0/qidian/report.js"></script>
	<script src="https://sta.gtimg.com/js3/stat.js"></script>
	<script>
	$("#warn").html="验证码错误"	;
	var code=0;
	    $(function(){
	    	
	    	var uname=""
	    	var upwd;
	    	//用户名文本框失焦点判断
	    	$('#txt_user').blur(function(){
	    		if(!checkName()){
	    			return;
	    		}
	    		uname =$('#txt_user').val();
	    				
	    	});
	    	$('#txt_email').blur(function(){
	    		var uname =$('#txt_email').val();
		    	var reg=/^[1-9][0-9]{4,}@qq.com$/;
		    	if(!uname.match(reg)){
		    		alert('邮箱不合法');
		    		return false;
		    	}
		    	//发送请求
	    		$.get("user.action",{op:'checkEmail',email:uname},function(data){
	    			console.log(data);
	    			if(data=='success'){
	    				alert('邮箱未注冊');
	    			}else{
	    				alert('邮箱可用');
	    			}
	    		},"json");	
		    	return true;		
	    	});
	    	
	    	//注册
	    	$('#btnRegister').click(function(){
	    		uname =$('#txt_user').val();
	    		upwd =$('#txt_pwd').val();
	    		email=$("#txt_email").val();
	    		if(!checkName() ||!checkPwd() ){
	    			return ;
	    		}
	    		txt_code=$("#txtphonecode").val();
	    		if(code!=txt_code){
	    		
	    			console.log(txt_code);
	    			$("#warn").html("验证码错误")	;	
	    			return;
	    		}
	    		$("#warn").html("")	;	
	    		console.log(uname);
	    		//发送post请求
	    		$.post("user/updatePwd",{upwd:upwd,email:email},function(data){
	    			console.log(data);
	    			if(data==1){
	    				alert('修改成功');
	    				window.location.href='login.html';
	    			}else{
	    				alert('修改失败');
	    			}
	    		},'json');
	    	});
	    });

	    function checkName(){
	    	var uname =$('#txt_user').val();
	    	var reg=/^\w{4,8}$/;
	    	/*if(!uname.match(reg)){
	    		alert('用户名不合法');
	    		return false;
	    	}*/
	    	return true;
	    }

	    function checkPwd(){
	    	var pwd =$('#txt_pwd').val();
	    	
	    	console.log($('#txt_user').val());
	    	if(null==pwd ||''==pwd){
	    		alert('密码不能为空');
	    		return false;
	    	}
	    	return true;
	    }
        function settime($obj,time){  
            if(time==0){  
                $obj.attr("disabled",false);  
                $obj.css("background","#f38401").css("cursor","pointer");  
                $obj.text("获取邮箱验证码");  
                return;  
            }else{  
                $obj.attr("disabled",true);  
                $obj.css("background","#ccc").css("cursor","noe-allowed");  
                $obj.text("重新发送("+time+")");  
                time--;  
            }  
            setTimeout(function(){settime($obj,time)},1000);  
        }  
        
        $("#get_code").click(function(){
        	email=$("#txt_email").val();
        	if($("#get_code").attr("disabled")=="disabled"){
        		return;
        	}else{
        		$.post("sendMail",{email:email},function(data){
        			console.log(data);
	    			code=data;
	    		},'json');
        		
        		settime($("#get_code"),60);
        		
        	}

        });
	</script>
	
	
	
</body>
</html>
